import{_ as T,x as A,l as B,r as u,k as V,d as E,y as F,z as I,o as l,c as d,a as s,g,A as h,t as a,b as n,n as z,i as H,F as $,e as R,h as j}from"./index-a28efa19.js";import{p as f}from"./index-a72ad2f1.js";const K={class:"container-fluid p-5"},L={"aria-label":"breadcrumb",class:"mb-4"},M={class:"breadcrumb"},U={class:"breadcrumb-item"},q={class:"breadcrumb-item"},G={class:"breadcrumb-item active","aria-current":"page"},J={key:0,class:"text-center py-5"},O={key:1,class:"alert alert-danger",role:"alert"},Q={class:"mt-3"},W={key:2},X={class:"row mb-4"},Y={class:"col-lg-8"},Z={class:"mb-1"},ss={class:"text-muted mb-0"},ts={class:"row"},os={class:"col-lg-4 mb-4"},es={class:"card h-100"},as={class:"product-image-container"},ls=["src","alt"],ds={class:"card-body"},ns={class:"mb-3"},cs={class:"text-primary mb-3"},is={class:"row text-center"},rs={class:"col-4"},us={class:"border-end"},ms={class:"mb-1"},vs={class:"col-4"},_s={class:"border-end"},bs={class:"mb-1"},ps={class:"col-4"},gs={class:"mb-1"},hs={class:"col-lg-8 mb-4"},fs={class:"card h-100"},ys={class:"card-body"},xs={class:"row mb-3"},ws={class:"col-sm-9"},ks={class:"row mb-3"},Cs={class:"col-sm-9"},Ds={class:"badge bg-secondary"},Ps={class:"row mb-3"},Ns={class:"col-sm-9"},Ss={class:"row mb-3"},Ts={class:"col-sm-9 text-primary fw-bold"},As={class:"row mb-3"},Bs={class:"col-sm-9"},Vs={class:"row mb-3"},Es={class:"col-sm-9"},Fs={class:"row"},Is={class:"col-12"},zs={class:"card"},Hs={class:"card-body"},$s={key:0,class:"row"},Rs=["onClick"],js={class:"related-image-container"},Ks=["src","alt"],Ls={class:"card-body p-3"},Ms={class:"card-title"},Us={class:"card-text text-primary fw-bold"},qs={key:1,class:"text-center py-4"},Gs={__name:"ProductDetail",setup(Js){const m=A(),y=B(),o=u(null),v=u([]),_=u(!1),r=u(null),x=V(()=>m.params.id),C=e=>e===0?"หมดสต็อก":e<=10?"สต็อกต่ำ":"ในสต็อก",D=e=>e===0?"bg-danger":e<=10?"bg-warning":"bg-success",b=e=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(e),w=e=>new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),p=async()=>{_.value=!0,r.value=null;try{const[e,t]=await Promise.all([f.getProduct(x.value),f.getProducts()]);if(!e)throw new Error("ไม่พบสินค้าที่ระบุ");o.value=e,v.value=t.filter(c=>c.category===e.category&&c.id!==e.id).slice(0,4)}catch(e){r.value=e.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล",console.error("Error loading product:",e)}finally{_.value=!1}},P=e=>{y.push(`/products/${e}`)},N=()=>{console.log("Edit product:",o.value)},S=async()=>{if(confirm(`คุณต้องการลบสินค้า "${o.value.name}" หรือไม่?`))try{await f.deleteProduct(x.value),y.push("/products")}catch{alert("เกิดข้อผิดพลาดในการลบสินค้า")}};return E(()=>{p()}),F(()=>m.params.id,()=>{m.name==="ProductDetail"&&p()}),(e,t)=>{var k;const c=I("router-link");return l(),d("div",K,[s("nav",L,[s("ol",M,[s("li",U,[g(c,{to:"/dashboard",class:"text-decoration-none"},{default:h(()=>t[0]||(t[0]=[s("i",{class:"fas fa-home me-1"},null,-1),n("หน้าหลัก ")])),_:1,__:[0]})]),s("li",q,[g(c,{to:"/products",class:"text-decoration-none"},{default:h(()=>t[1]||(t[1]=[n("สินค้า")])),_:1,__:[1]})]),s("li",G,a(((k=o.value)==null?void 0:k.name)||"รายละเอียดสินค้า"),1)])]),_.value?(l(),d("div",J,t[2]||(t[2]=[s("div",{class:"spinner-border text-primary",style:{width:"3rem",height:"3rem"}},null,-1),s("p",{class:"mt-3 text-muted"},"กำลังโหลดข้อมูลสินค้า...",-1)]))):r.value?(l(),d("div",O,[t[5]||(t[5]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n(" "+a(r.value)+" ",1),s("div",Q,[s("button",{class:"btn btn-outline-danger me-2",onClick:p},t[3]||(t[3]=[s("i",{class:"fas fa-redo me-1"},null,-1),n("ลองใหม่ ")])),g(c,{to:"/products",class:"btn btn-secondary"},{default:h(()=>t[4]||(t[4]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),n("กลับไปหน้าสินค้า ")])),_:1,__:[4]})])])):o.value?(l(),d("div",W,[s("div",X,[s("div",Y,[s("h2",Z,a(o.value.name),1),s("p",ss,"SKU: "+a(o.value.sku),1)]),s("div",{class:"col-lg-4 text-end"},[s("button",{class:"btn btn-primary me-2",onClick:N},t[6]||(t[6]=[s("i",{class:"fas fa-edit me-2"},null,-1),n("แก้ไข ")])),s("button",{class:"btn btn-danger",onClick:S},t[7]||(t[7]=[s("i",{class:"fas fa-trash me-2"},null,-1),n("ลบ ")]))])]),s("div",ts,[s("div",os,[s("div",es,[s("div",as,[s("img",{src:o.value.image,class:"main-product-image",alt:o.value.name},null,8,ls)]),s("div",ds,[s("div",ns,[s("span",{class:z(["badge",D(o.value.stock)]),style:{"font-size":"0.9rem"}},a(C(o.value.stock)),3)]),s("h4",cs,a(b(o.value.price)),1),s("div",is,[s("div",rs,[s("div",us,[s("h5",ms,a(o.value.stock),1),t[8]||(t[8]=s("small",{class:"text-muted"},"คงเหลือ",-1))])]),s("div",vs,[s("div",_s,[s("h5",bs,a(o.value.sold||0),1),t[9]||(t[9]=s("small",{class:"text-muted"},"ขายแล้ว",-1))])]),s("div",ps,[s("h5",gs,a(o.value.views||0),1),t[10]||(t[10]=s("small",{class:"text-muted"},"ยอดดู",-1))])])])])]),s("div",hs,[s("div",fs,[t[17]||(t[17]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"รายละเอียดสินค้า")],-1)),s("div",ys,[s("div",xs,[t[11]||(t[11]=s("div",{class:"col-sm-3"},[s("strong",null,"ชื่อสินค้า:")],-1)),s("div",ws,a(o.value.name),1)]),s("div",ks,[t[12]||(t[12]=s("div",{class:"col-sm-3"},[s("strong",null,"หมวดหมู่:")],-1)),s("div",Cs,[s("span",Ds,a(o.value.category),1)])]),s("div",Ps,[t[13]||(t[13]=s("div",{class:"col-sm-3"},[s("strong",null,"คำอธิบาย:")],-1)),s("div",Ns,a(o.value.description),1)]),s("div",Ss,[t[14]||(t[14]=s("div",{class:"col-sm-3"},[s("strong",null,"ราคา:")],-1)),s("div",Ts,a(b(o.value.price)),1)]),s("div",As,[t[15]||(t[15]=s("div",{class:"col-sm-3"},[s("strong",null,"วันที่เพิ่ม:")],-1)),s("div",Bs,a(w(o.value.createdAt)),1)]),s("div",Vs,[t[16]||(t[16]=s("div",{class:"col-sm-3"},[s("strong",null,"อัปเดตล่าสุด:")],-1)),s("div",Es,a(w(o.value.updatedAt||o.value.createdAt)),1)])])])])]),t[20]||(t[20]=H('<div class="row" data-v-b21287b0><div class="col-12 mb-4" data-v-b21287b0><div class="card" data-v-b21287b0><div class="card-header d-flex justify-content-between align-items-center" data-v-b21287b0><h5 class="mb-0" data-v-b21287b0>ประวัติการขาย</h5><div class="btn-group btn-group-sm" data-v-b21287b0><button class="btn btn-outline-secondary active" data-v-b21287b0>7 วัน</button><button class="btn btn-outline-secondary" data-v-b21287b0>30 วัน</button><button class="btn btn-outline-secondary" data-v-b21287b0>90 วัน</button></div></div><div class="card-body" data-v-b21287b0><canvas id="salesChart" height="100" data-v-b21287b0></canvas></div></div></div></div>',1)),s("div",Fs,[s("div",Is,[s("div",zs,[t[19]||(t[19]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"สินค้าที่เกี่ยวข้อง")],-1)),s("div",Hs,[v.value.length>0?(l(),d("div",$s,[(l(!0),d($,null,R(v.value,i=>(l(),d("div",{key:i.id,class:"col-lg-3 col-md-4 col-sm-6 mb-3"},[s("div",{class:"card h-100 product-card",onClick:Os=>P(i.id)},[s("div",js,[s("img",{src:i.image,class:"card-img-top related-product-image",alt:i.name},null,8,Ks)]),s("div",Ls,[s("h6",Ms,a(i.name),1),s("p",Us,a(b(i.price)),1)])],8,Rs)]))),128))])):(l(),d("div",qs,t[18]||(t[18]=[s("i",{class:"fas fa-box-open fa-3x text-muted mb-3"},null,-1),s("p",{class:"text-muted"},"ไม่มีสินค้าที่เกี่ยวข้อง",-1)])))])])])])])):j("",!0)])}}},Xs=T(Gs,[["__scopeId","data-v-b21287b0"]]);export{Xs as default};
