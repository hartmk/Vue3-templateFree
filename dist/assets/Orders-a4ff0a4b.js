import{_ as A,l as U,r as n,k as f,d as H,o as r,c as u,a as t,i as C,t as a,w as y,m as Y,q as N,g as z,u as Q,C as R,b as G,F as D,e as M,n as _,s as v,h as O}from"./index-a28efa19.js";import{t as J}from"./th-7f39ab5b.js";import"./_commonjsHelpers-725317a4.js";const K={class:"orders-page container-fluid py-4 px-5"},W={class:"row mb-4"},X={class:"col-xl-3 col-md-6 mb-3"},Z={class:"card stat-card primary"},tt={class:"card-body"},et={class:"d-flex justify-content-between align-items-center"},st={class:"mb-0"},lt={class:"col-xl-3 col-md-6 mb-3"},at={class:"card stat-card success"},ot={class:"card-body"},nt={class:"d-flex justify-content-between align-items-center"},it={class:"mb-0"},dt={class:"col-xl-3 col-md-6 mb-3"},ct={class:"card stat-card warning"},rt={class:"card-body"},ut={class:"d-flex justify-content-between align-items-center"},vt={class:"mb-0"},mt={class:"col-xl-3 col-md-6 mb-3"},pt={class:"card stat-card info"},ft={class:"card-body"},bt={class:"d-flex justify-content-between align-items-center"},gt={class:"mb-0"},_t={class:"card mb-4"},ht={class:"card-body"},yt={class:"row align-items-center"},xt={class:"col-lg-4"},wt={class:"input-group"},kt={class:"col-lg-2"},Ct={class:"col-lg-2"},Nt={class:"col-lg-2"},Dt={class:"card"},Mt={class:"card-body"},Ot={class:"table-responsive"},Pt={class:"table table-hover"},St=["onClick"],Vt={class:"text-primary"},Ft={class:"text-muted"},Tt={class:"badge bg-light text-dark"},$t={class:"text-success fw-bold"},Et={class:"btn-group",role:"group"},Bt=["onClick"],Lt=["onClick"],jt=["onClick"],qt={key:0,class:"text-center py-5"},It={key:0,class:"d-flex justify-content-between align-items-center mt-4"},At={class:"text-muted"},Ut={class:"pagination pagination-sm mb-0"},Ht=["onClick"],Yt={__name:"Orders",setup(zt){const x=U(),P=n({dateFormat:"Y-m-d",altInput:!0,altFormat:"j F Y",allowInput:!0,locale:J.Thai}),i=n([{id:1,orderNumber:"000001",customerName:"สมชาย ใจดี",customerEmail:"somchai@email.com",date:new Date("2024-01-15"),items:[{name:"iPhone 15 Pro",quantity:1,price:39900},{name:"AirPods Pro",quantity:1,price:8990}],total:48890,status:"delivered"},{id:2,orderNumber:"000002",customerName:"สมหญิง สวยงาม",customerEmail:"somying@email.com",date:new Date("2024-01-14"),items:[{name:"MacBook Air M3",quantity:1,price:42900}],total:42900,status:"shipped"},{id:3,orderNumber:"000003",customerName:"วิทยา เก่งมาก",customerEmail:"wittaya@email.com",date:new Date("2024-01-13"),items:[{name:"iPad Air",quantity:2,price:19900},{name:"Apple Pencil",quantity:2,price:3790}],total:47380,status:"processing"}]),d=n(""),m=n(""),p=n(""),b=n("date"),o=n(1),h=n(10),c=f(()=>{let l=i.value;if(d.value&&(l=l.filter(e=>e.orderNumber.toLowerCase().includes(d.value.toLowerCase())||e.customerName.toLowerCase().includes(d.value.toLowerCase())||e.customerEmail.toLowerCase().includes(d.value.toLowerCase()))),m.value&&(l=l.filter(e=>e.status===m.value)),p.value){const e=new Date(p.value);l=l.filter(s=>s.date.toDateString()===e.toDateString())}return l.sort((e,s)=>{switch(b.value){case"date":return s.date-e.date;case"amount":return s.total-e.total;case"customer":return e.customerName.localeCompare(s.customerName);default:return 0}}),l}),S=f(()=>i.value.filter(l=>l.status==="delivered").length),V=f(()=>i.value.filter(l=>["pending","processing"].includes(l.status)).length),F=f(()=>{const l=new Date;return i.value.filter(e=>e.date.toDateString()===l.toDateString()).reduce((e,s)=>e+s.total,0)}),w=f(()=>Math.ceil(c.value.length/h.value)),k=l=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(l),T=l=>new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(l),$=l=>({pending:"รอดำเนินการ",processing:"กำลังดำเนินการ",shipped:"จัดส่งแล้ว",delivered:"ส่งมอบแล้ว",cancelled:"ยกเลิก"})[l]||l,E=l=>({pending:"bg-warning",processing:"bg-info",shipped:"bg-primary",delivered:"bg-success",cancelled:"bg-danger"})[l]||"bg-secondary",B=l=>{x.push(`/orders/${l}`)},L=l=>{x.push(`/orders/${l.id}`)},j=l=>{console.log("Edit order:",l)},q=l=>{if(confirm("คุณต้องการลบคำสั่งซื้อนี้หรือไม่?")){const e=i.value.findIndex(s=>s.id===l);e!==-1&&i.value.splice(e,1)}},I=()=>{d.value="",m.value="",p.value="",b.value="date",o.value=1};return H(()=>{console.log("Orders component mounted")}),(l,e)=>(r(),u("div",K,[t("div",null,[e[24]||(e[24]=C('<div class="row mb-4" data-v-6f8bdf98><div class="col-lg-6" data-v-6f8bdf98><h2 class="mb-0" data-v-6f8bdf98>คำสั่งซื้อ</h2><p class="text-muted" data-v-6f8bdf98>จัดการคำสั่งซื้อทั้งหมด</p></div><div class="col-lg-6 text-end" data-v-6f8bdf98><button class="btn btn-primary me-2" data-v-6f8bdf98><i class="fas fa-plus me-2" data-v-6f8bdf98></i>เพิ่มคำสั่งซื้อ </button><button class="btn btn-outline-secondary" data-v-6f8bdf98><i class="fas fa-download me-2" data-v-6f8bdf98></i>ส่งออกข้อมูล </button></div></div>',1)),t("div",W,[t("div",X,[t("div",Z,[t("div",tt,[t("div",et,[t("div",null,[e[6]||(e[6]=t("h6",{class:"card-title text-uppercase opacity-75"},"คำสั่งซื้อทั้งหมด",-1)),t("h2",st,a(i.value.length),1)]),e[7]||(e[7]=t("div",{class:"fs-1 opacity-25"},[t("i",{class:"fas fa-shopping-cart"})],-1))])])])]),t("div",lt,[t("div",at,[t("div",ot,[t("div",nt,[t("div",null,[e[8]||(e[8]=t("h6",{class:"card-title text-uppercase opacity-75"},"สำเร็จแล้ว",-1)),t("h2",it,a(S.value),1)]),e[9]||(e[9]=t("div",{class:"fs-1 opacity-25"},[t("i",{class:"fas fa-check-circle"})],-1))])])])]),t("div",dt,[t("div",ct,[t("div",rt,[t("div",ut,[t("div",null,[e[10]||(e[10]=t("h6",{class:"card-title text-uppercase opacity-75"},"รอดำเนินการ",-1)),t("h2",vt,a(V.value),1)]),e[11]||(e[11]=t("div",{class:"fs-1 opacity-25"},[t("i",{class:"fas fa-clock"})],-1))])])])]),t("div",mt,[t("div",pt,[t("div",ft,[t("div",bt,[t("div",null,[e[12]||(e[12]=t("h6",{class:"card-title text-uppercase opacity-75"},"ยอดขายวันนี้",-1)),t("h2",gt,a(k(F.value)),1)]),e[13]||(e[13]=t("div",{class:"fs-1 opacity-25"},[t("i",{class:"fas fa-dollar-sign"})],-1))])])])])]),t("div",_t,[t("div",ht,[t("div",yt,[t("div",xt,[t("div",wt,[e[14]||(e[14]=t("span",{class:"input-group-text"},[t("i",{class:"fas fa-search"})],-1)),y(t("input",{type:"text",class:"form-control",placeholder:"ค้นหาคำสั่งซื้อ...","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,512),[[Y,d.value]])])]),t("div",kt,[y(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s)},e[15]||(e[15]=[C('<option value="" data-v-6f8bdf98>สถานะทั้งหมด</option><option value="pending" data-v-6f8bdf98>รอดำเนินการ</option><option value="processing" data-v-6f8bdf98>กำลังดำเนินการ</option><option value="shipped" data-v-6f8bdf98>จัดส่งแล้ว</option><option value="delivered" data-v-6f8bdf98>ส่งมอบแล้ว</option><option value="cancelled" data-v-6f8bdf98>ยกเลิก</option>',6)]),512),[[N,m.value]])]),t("div",Ct,[z(Q(R),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),config:P.value,class:"form-control",placeholder:"เลือกวันที่..."},null,8,["modelValue","config"])]),t("div",Nt,[y(t("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s)},e[16]||(e[16]=[t("option",{value:"date"},"เรียงตามวันที่",-1),t("option",{value:"amount"},"เรียงตามยอดเงิน",-1),t("option",{value:"customer"},"เรียงตามลูกค้า",-1)]),512),[[N,b.value]])]),t("div",{class:"col-lg-2"},[t("button",{class:"btn btn-outline-secondary w-100",onClick:I},e[17]||(e[17]=[t("i",{class:"fas fa-undo me-1"},null,-1),G("รีเซ็ต ")]))])])])]),t("div",Dt,[t("div",Mt,[t("div",Ot,[t("table",Pt,[e[22]||(e[22]=t("thead",null,[t("tr",null,[t("th",null,"หมายเลขคำสั่ง"),t("th",null,"ลูกค้า"),t("th",null,"วันที่สั่ง"),t("th",null,"สินค้า"),t("th",null,"ยอดรวม"),t("th",null,"สถานะ"),t("th",null,"การจัดการ")])],-1)),t("tbody",null,[(r(!0),u(D,null,M(c.value,s=>(r(),u("tr",{key:s.id,class:"cursor-pointer",onClick:g=>B(s.id)},[t("td",null,[t("strong",Vt,"#"+a(s.orderNumber),1)]),t("td",null,[t("div",null,[t("strong",null,a(s.customerName),1),e[18]||(e[18]=t("br",null,null,-1)),t("small",Ft,a(s.customerEmail),1)])]),t("td",null,a(T(s.date)),1),t("td",null,[t("span",Tt,a(s.items.length)+" รายการ",1)]),t("td",$t,a(k(s.total)),1),t("td",null,[t("span",{class:_(["badge",E(s.status)])},a($(s.status)),3)]),t("td",null,[t("div",Et,[t("button",{class:"btn btn-outline-primary btn-sm",onClick:v(g=>L(s),["stop"]),title:"ดู"},e[19]||(e[19]=[t("i",{class:"fas fa-eye"},null,-1)]),8,Bt),t("button",{class:"btn btn-outline-success btn-sm",onClick:v(g=>j(s),["stop"]),title:"แก้ไข"},e[20]||(e[20]=[t("i",{class:"fas fa-edit"},null,-1)]),8,Lt),t("button",{class:"btn btn-outline-danger btn-sm",onClick:v(g=>q(s.id),["stop"]),title:"ลบ"},e[21]||(e[21]=[t("i",{class:"fas fa-trash"},null,-1)]),8,jt)])])],8,St))),128))])])]),c.value.length===0?(r(),u("div",qt,e[23]||(e[23]=[t("i",{class:"fas fa-shopping-cart fa-3x text-muted mb-3"},null,-1),t("h5",{class:"text-muted"},"ไม่พบคำสั่งซื้อ",-1),t("p",{class:"text-muted"},"ลองเปลี่ยนเงื่อนไขการค้นหา หรือเพิ่มคำสั่งซื้อใหม่",-1)]))):O("",!0)])]),c.value.length>0?(r(),u("div",It,[t("div",null,[t("small",At," แสดง "+a(Math.min((o.value-1)*h.value+1,c.value.length))+" - "+a(Math.min(o.value*h.value,c.value.length))+" จาก "+a(c.value.length)+" รายการ ",1)]),t("nav",null,[t("ul",Ut,[t("li",{class:_(["page-item",{disabled:o.value===1}])},[t("a",{class:"page-link",href:"#",onClick:e[4]||(e[4]=v(s=>o.value=o.value-1,["prevent"]))},"ก่อนหน้า")],2),(r(!0),u(D,null,M(w.value,s=>(r(),u("li",{class:_(["page-item",{active:o.value===s}]),key:s},[t("a",{class:"page-link",href:"#",onClick:v(g=>o.value=s,["prevent"])},a(s),9,Ht)],2))),128)),t("li",{class:_(["page-item",{disabled:o.value===w.value}])},[t("a",{class:"page-link",href:"#",onClick:e[5]||(e[5]=v(s=>o.value=o.value+1,["prevent"]))},"ถัดไป")],2)])])])):O("",!0)])]))}},Jt=A(Yt,[["__scopeId","data-v-6f8bdf98"]]);export{Jt as default};
