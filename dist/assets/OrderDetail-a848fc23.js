import{_ as $,x as q,r as y,k as I,d as B,z as S,o as d,c as i,a as s,g as m,A as v,t as a,u as F,b as n,n as x,h as c,F as N,e as O}from"./index-a28efa19.js";const H={class:"container-fluid px-5 py-4"},R={"aria-label":"breadcrumb",class:"mb-4"},V={class:"breadcrumb"},z={class:"breadcrumb-item"},j={class:"breadcrumb-item"},K={class:"breadcrumb-item active","aria-current":"page"},L={key:0,class:"text-center py-5"},U={key:1,class:"alert alert-danger",role:"alert"},G={class:"mt-3"},J={key:2},Q={class:"row mb-4"},W={class:"col-lg-8"},X={class:"mb-1"},Y={class:"text-muted mb-0"},Z={class:"col-lg-4 text-end"},ss={class:"row mb-4"},ts={class:"col-lg-4 mb-4"},es={class:"card h-100"},ls={class:"card-body"},os={class:"fw-bold"},as={class:"mb-2"},ns={class:"mb-2"},ds={key:0},is={class:"mb-0 small"},rs={class:"col-lg-4 mb-4"},cs={class:"card h-100"},us={class:"card-body"},ms={class:"row mb-2"},vs={class:"col-6 fw-bold"},bs={class:"row mb-2"},ps={class:"col-6"},fs={class:"row mb-2"},_s={class:"col-6"},gs={class:"row mb-2"},hs={class:"col-6"},ys={class:"row"},xs={class:"col-6 fw-bold text-success"},ks={class:"col-lg-4 mb-4"},ws={class:"card h-100"},Cs={class:"card-body"},Is={class:"timeline"},Ns={class:"timeline-marker"},Os={class:"timeline-content"},Ps={class:"mb-1"},Ds={class:"text-muted"},As={class:"row"},Es={class:"col-12"},Ms={class:"card"},Ts={class:"card-body p-0"},$s={class:"table-responsive"},qs={class:"table table-hover mb-0"},Bs={class:"d-flex align-items-center"},Ss=["src","alt"],Fs={class:"mb-1"},Hs={class:"text-muted"},Rs={class:"text-center"},Vs={class:"badge bg-light text-dark"},zs={class:"text-end"},js={class:"text-end fw-bold"},Ks={class:"text-center"},Ls={class:"bg-light"},Us={class:"text-end fw-bold text-success fs-5"},Gs={class:"row mt-4"},Js={class:"col-12 text-center"},Qs={__name:"OrderDetail",setup(Ws){const k=q(),e=y(null),g=y(!1),b=y(null),P=[{id:1,orderNumber:"000001",customerName:"สมชาย ใจดี",customerEmail:"somchai@email.com",customerPhone:"081-234-5678",shippingAddress:"123 ถนนสุขุมวิท แขวงคลองตัน เขตคลองตัน กรุงเทพมหานคร 10110",date:new Date("2024-01-15"),items:[{id:1,name:"iPhone 15 Pro",quantity:1,price:39900,sku:"IPH15PRO",image:"https://via.placeholder.com/50"},{id:2,name:"AirPods Pro",quantity:1,price:8990,sku:"AIRPRO",image:"https://via.placeholder.com/50"}],total:48890,status:"delivered",paymentMethod:"บัตรเครดิต"}],D=I(()=>e.value?e.value.items.reduce((l,t)=>l+t.quantity,0):0),A=I(()=>{var u;const l=[{title:"ได้รับคำสั่งซื้อ",icon:"fas fa-receipt",completed:!0,date:h((u=e.value)==null?void 0:u.date)},{title:"กำลังดำเนินการ",icon:"fas fa-cog",completed:!1},{title:"จัดส่งสินค้า",icon:"fas fa-shipping-fast",completed:!1},{title:"ส่งมอบเรียบร้อย",icon:"fas fa-check-circle",completed:!1}];if(!e.value)return l;const r={pending:0,processing:1,shipped:2,delivered:3,cancelled:-1}[e.value.status]||0;return l.forEach((o,_)=>{_<r?o.completed=!0:_===r&&(o.current=!0,o.completed=!0)}),l}),p=l=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(l),h=l=>l?new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(l)):"",w=l=>({pending:"รอดำเนินการ",processing:"กำลังดำเนินการ",shipped:"จัดส่งแล้ว",delivered:"ส่งมอบแล้ว",cancelled:"ยกเลิก"})[l]||l,E=l=>({pending:"bg-warning",processing:"bg-info",shipped:"bg-primary",delivered:"bg-success",cancelled:"bg-danger"})[l]||"bg-secondary",C=async()=>{g.value=!0,b.value=null;try{await new Promise(r=>setTimeout(r,1e3));const l=parseInt(k.params.id),t=P.find(r=>r.id===l);if(!t)throw new Error("ไม่พบคำสั่งซื้อที่ระบุ");e.value=t}catch(l){b.value=l.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล",console.error("Error loading order:",l)}finally{g.value=!1}},f=l=>{confirm(`คุณต้องการเปลี่ยนสถานะเป็น "${w(l)}" หรือไม่?`)&&(e.value.status=l,console.log("Status updated to:",l))},M=()=>{console.log("Edit order:",e.value)},T=()=>{window.print()};return B(()=>{C()}),(l,t)=>{var u;const r=S("router-link");return d(),i("div",H,[s("nav",R,[s("ol",V,[s("li",z,[m(r,{to:"/dashboard",class:"text-decoration-none"},{default:v(()=>t[4]||(t[4]=[s("i",{class:"fas fa-home me-1"},null,-1),n("หน้าหลัก ")])),_:1,__:[4]})]),s("li",j,[m(r,{to:"/orders",class:"text-decoration-none"},{default:v(()=>t[5]||(t[5]=[n("คำสั่งซื้อ")])),_:1,__:[5]})]),s("li",K," คำสั่งซื้อ #"+a(((u=e.value)==null?void 0:u.orderNumber)||F(k).params.id),1)])]),g.value?(d(),i("div",L,t[6]||(t[6]=[s("div",{class:"spinner-border text-primary",style:{width:"3rem",height:"3rem"}},null,-1),s("p",{class:"mt-3 text-muted"},"กำลังโหลดข้อมูลคำสั่งซื้อ...",-1)]))):b.value?(d(),i("div",U,[t[9]||(t[9]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n(" "+a(b.value)+" ",1),s("div",G,[s("button",{class:"btn btn-outline-danger me-2",onClick:C},t[7]||(t[7]=[s("i",{class:"fas fa-redo me-1"},null,-1),n("ลองใหม่ ")])),m(r,{to:"/orders",class:"btn btn-secondary"},{default:v(()=>t[8]||(t[8]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),n("กลับไปหน้าคำสั่งซื้อ ")])),_:1,__:[8]})])])):e.value?(d(),i("div",J,[s("div",Q,[s("div",W,[s("h2",X,"คำสั่งซื้อ #"+a(e.value.orderNumber),1),s("p",Y,[t[10]||(t[10]=s("i",{class:"fas fa-calendar me-1"},null,-1)),n(a(h(e.value.date)),1)])]),s("div",Z,[s("span",{class:x(["badge fs-6 me-2",E(e.value.status)])},a(w(e.value.status)),3),s("div",{class:"btn-group"},[s("button",{class:"btn btn-outline-primary btn-sm",onClick:T},t[11]||(t[11]=[s("i",{class:"fas fa-print me-1"},null,-1),n("พิมพ์ ")])),s("button",{class:"btn btn-outline-success btn-sm",onClick:M},t[12]||(t[12]=[s("i",{class:"fas fa-edit me-1"},null,-1),n("แก้ไข ")]))])])]),s("div",ss,[s("div",ts,[s("div",es,[t[17]||(t[17]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-user me-2"}),n("ข้อมูลลูกค้า ")])],-1)),s("div",ls,[s("h6",os,a(e.value.customerName),1),s("p",as,[t[13]||(t[13]=s("i",{class:"fas fa-envelope me-2 text-muted"},null,-1)),n(" "+a(e.value.customerEmail),1)]),s("p",ns,[t[14]||(t[14]=s("i",{class:"fas fa-phone me-2 text-muted"},null,-1)),n(" "+a(e.value.customerPhone||"ไม่ระบุ"),1)]),e.value.shippingAddress?(d(),i("div",ds,[t[15]||(t[15]=s("hr",null,null,-1)),t[16]||(t[16]=s("h6",{class:"fw-bold mb-2"},"ที่อยู่จัดส่ง",-1)),s("p",is,a(e.value.shippingAddress),1)])):c("",!0)])])]),s("div",rs,[s("div",cs,[t[24]||(t[24]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-info-circle me-2"}),n("สรุปคำสั่งซื้อ ")])],-1)),s("div",us,[s("div",ms,[t[18]||(t[18]=s("div",{class:"col-6"},"หมายเลขคำสั่ง:",-1)),s("div",vs,"#"+a(e.value.orderNumber),1)]),s("div",bs,[t[19]||(t[19]=s("div",{class:"col-6"},"วันที่สั่ง:",-1)),s("div",ps,a(h(e.value.date)),1)]),s("div",fs,[t[20]||(t[20]=s("div",{class:"col-6"},"จำนวนสินค้า:",-1)),s("div",_s,a(D.value)+" รายการ",1)]),s("div",gs,[t[21]||(t[21]=s("div",{class:"col-6"},"วิธีการชำระเงิน:",-1)),s("div",hs,a(e.value.paymentMethod||"เงินสด"),1)]),t[23]||(t[23]=s("hr",null,null,-1)),s("div",ys,[t[22]||(t[22]=s("div",{class:"col-6 fw-bold"},"ยอดรวมทั้งสิ้น:",-1)),s("div",xs,a(p(e.value.total)),1)])])])]),s("div",ks,[s("div",ws,[t[25]||(t[25]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-clock me-2"}),n("สถานะการดำเนินการ ")])],-1)),s("div",Cs,[s("div",Is,[(d(!0),i(N,null,O(A.value,(o,_)=>(d(),i("div",{key:_,class:x(["timeline-item",{active:o.completed,current:o.current}])},[s("div",Ns,[s("i",{class:x(o.icon)},null,2)]),s("div",Os,[s("h6",Ps,a(o.title),1),s("small",Ds,a(o.date||"รอดำเนินการ"),1)])],2))),128))])])])])]),s("div",As,[s("div",Es,[s("div",Ms,[t[30]||(t[30]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-shopping-bag me-2"}),n("รายการสินค้า ")])],-1)),s("div",Ts,[s("div",$s,[s("table",qs,[t[29]||(t[29]=s("thead",{class:"bg-light"},[s("tr",null,[s("th",null,"สินค้า"),s("th",{class:"text-center"},"จำนวน"),s("th",{class:"text-end"},"ราคาต่อหน่วย"),s("th",{class:"text-end"},"รวม"),s("th",{class:"text-center"},"การจัดการ")])],-1)),s("tbody",null,[(d(!0),i(N,null,O(e.value.items,o=>(d(),i("tr",{key:o.id,class:"align-middle"},[s("td",null,[s("div",Bs,[s("img",{src:o.image||"https://via.placeholder.com/50",class:"me-3 rounded",style:{width:"50px",height:"50px","object-fit":"cover"},alt:o.name},null,8,Ss),s("div",null,[s("h6",Fs,a(o.name),1),s("small",Hs,"SKU: "+a(o.sku||"N/A"),1)])])]),s("td",Rs,[s("span",Vs,a(o.quantity),1)]),s("td",zs,a(p(o.price)),1),s("td",js,a(p(o.price*o.quantity)),1),s("td",Ks,[m(r,{to:`/products/${o.productId||o.id}`,class:"btn btn-outline-primary btn-sm",title:"ดูรายละเอียดสินค้า"},{default:v(()=>t[26]||(t[26]=[s("i",{class:"fas fa-eye"},null,-1)])),_:2,__:[26]},1032,["to"])])]))),128))]),s("tfoot",Ls,[s("tr",null,[t[27]||(t[27]=s("td",{colspan:"3",class:"text-end fw-bold"},"ยอดรวมทั้งสิ้น:",-1)),s("td",Us,a(p(e.value.total)),1),t[28]||(t[28]=s("td",null,null,-1))])])])])])])])]),s("div",Gs,[s("div",Js,[e.value.status==="pending"?(d(),i("button",{key:0,class:"btn btn-success me-2",onClick:t[0]||(t[0]=o=>f("processing"))},t[31]||(t[31]=[s("i",{class:"fas fa-play me-1"},null,-1),n("เริ่มดำเนินการ ")]))):c("",!0),e.value.status==="processing"?(d(),i("button",{key:1,class:"btn btn-primary me-2",onClick:t[1]||(t[1]=o=>f("shipped"))},t[32]||(t[32]=[s("i",{class:"fas fa-shipping-fast me-1"},null,-1),n("จัดส่งสินค้า ")]))):c("",!0),e.value.status==="shipped"?(d(),i("button",{key:2,class:"btn btn-success me-2",onClick:t[2]||(t[2]=o=>f("delivered"))},t[33]||(t[33]=[s("i",{class:"fas fa-check me-1"},null,-1),n("ยืนยันการส่งมอบ ")]))):c("",!0),["pending","processing"].includes(e.value.status)?(d(),i("button",{key:3,class:"btn btn-danger me-2",onClick:t[3]||(t[3]=o=>f("cancelled"))},t[34]||(t[34]=[s("i",{class:"fas fa-times me-1"},null,-1),n("ยกเลิกคำสั่งซื้อ ")]))):c("",!0),m(r,{to:"/orders",class:"btn btn-outline-secondary"},{default:v(()=>t[35]||(t[35]=[s("i",{class:"fas fa-arrow-left me-1"},null,-1),n("กลับไปหน้าคำสั่งซื้อ ")])),_:1,__:[35]})])])])):c("",!0)])}}},Ys=$(Qs,[["__scopeId","data-v-1f3c7f72"]]);export{Ys as default};
