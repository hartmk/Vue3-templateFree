import{o,c,a as t,t as d,n as b,b as y,r as h,d as $,F as x,e as C,u as m,f as R,g as f}from"./index-a28efa19.js";import{C as g,r as D}from"./chart-e7add24e.js";import{d as v,a as p}from"./index-a72ad2f1.js";const S={class:"col-xl-3 col-md-6 mb-4"},O={class:"card-body"},E={class:"d-flex justify-content-between align-items-center"},B={class:"card-title text-uppercase opacity-75"},T={class:"mb-0"},F={class:"opacity-75"},H={class:"fs-1 opacity-25"},N={__name:"StatCard",props:{stat:Object},setup(r){return(n,l)=>(o(),c("div",S,[t("div",{class:b(["card stat-card",r.stat.type])},[t("div",O,[t("div",E,[t("div",null,[t("h6",B,d(r.stat.title),1),t("h2",T,d(r.stat.value),1),t("small",F,[t("i",{class:b([r.stat.trend.icon,"me-1"])},null,2),y(" "+d(r.stat.trend.value)+"% จากเดือนที่แล้ว ",1)])]),t("div",H,[t("i",{class:b(r.stat.icon)},null,2)])])])],2)]))}},j={class:"col-lg-8 mb-4"},V={class:"card"},I={class:"card-body"},L={class:"position-relative",style:{height:"300px"}},P={__name:"SalesChart",setup(r){g.register(...D);const n=h(null),l=()=>{n.value&&new g(n.value,{type:"line",data:{labels:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย."],datasets:[{label:"ยอดขาย (บาท)",data:[12e4,19e4,15e4,22e4,18e4,25e4],borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(a){return"฿"+a.toLocaleString()}}}}}})};return $(()=>{l()}),(a,s)=>(o(),c("div",j,[t("div",V,[s[0]||(s[0]=t("div",{class:"card-header bg-transparent"},[t("h5",{class:"card-title mb-0"},"ยอดขายรายเดือน")],-1)),t("div",I,[t("div",L,[t("canvas",{ref_key:"salesChart",ref:n},null,512)])])])]))}},z={class:"col-lg-4 mb-4"},M={class:"card"},W={class:"card-body"},Z={class:"position-relative",style:{height:"300px"}},q={__name:"ProductChart",setup(r){g.register(...D);const n=h(null),l=()=>{n.value&&new g(n.value,{type:"doughnut",data:{labels:["เสื้อผ้า","รองเท้า","กระเป๋า","เครื่องประดับ"],datasets:[{data:[35,25,20,20],backgroundColor:["#667eea","#56ab2f","#f093fb","#4facfe"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})};return $(()=>{l()}),(a,s)=>(o(),c("div",z,[t("div",M,[s[0]||(s[0]=t("div",{class:"card-header bg-transparent"},[t("h5",{class:"card-title mb-0"},"สัดส่วนผลิตภัณฑ์")],-1)),t("div",W,[t("div",Z,[t("canvas",{ref_key:"productChart",ref:n},null,512)])])])]))}},G={class:"col-lg-8 mb-4"},J={class:"card"},K={class:"card-body"},Q={class:"table-responsive"},U={class:"table table-hover"},X={__name:"RecentOrders",props:{orders:Array},setup(r){const n=s=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(s),l=s=>new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"short",day:"numeric"}).format(s),a=s=>({รอชำระเงิน:"bg-warning",ชำระแล้ว:"bg-success",จัดส่งแล้ว:"bg-info",เสร็จสิ้น:"bg-primary",ยกเลิก:"bg-danger"})[s]||"bg-secondary";return(s,u)=>(o(),c("div",G,[t("div",J,[u[1]||(u[1]=t("div",{class:"card-header bg-transparent"},[t("h5",{class:"card-title mb-0"},"ออร์เดอร์ล่าสุด")],-1)),t("div",K,[t("div",Q,[t("table",U,[u[0]||(u[0]=t("thead",null,[t("tr",null,[t("th",null,"หมายเลขออร์เดอร์"),t("th",null,"ลูกค้า"),t("th",null,"จำนวนเงิน"),t("th",null,"สถานะ"),t("th",null,"วันที่")])],-1)),t("tbody",null,[(o(!0),c(x,null,C(r.orders,i=>(o(),c("tr",{key:i.id},[t("td",null,[t("strong",null,d(i.id),1)]),t("td",null,d(i.customer),1),t("td",null,d(n(i.amount)),1),t("td",null,[t("span",{class:b(["badge",a(i.status)])},d(i.status),3)]),t("td",null,d(l(i.date)),1)]))),128))])])])])])]))}},Y={class:"col-lg-4 mb-4"},tt={class:"card"},st={class:"card-body"},et={class:"activity-timeline"},at={class:"flex-shrink-0"},rt={class:"flex-grow-1 ms-3"},nt={class:"mb-1"},lt={class:"text-muted small mb-0"},ot={class:"text-muted"},ct={__name:"RecentActivities",props:{activities:Array},setup(r){return(n,l)=>(o(),c("div",Y,[t("div",tt,[l[0]||(l[0]=t("div",{class:"card-header bg-transparent"},[t("h5",{class:"card-title mb-0"},"กิจกรรมล่าสุด")],-1)),t("div",st,[t("div",et,[(o(!0),c(x,null,C(r.activities,a=>(o(),c("div",{key:a.id,class:"d-flex mb-3"},[t("div",at,[t("div",{class:b(["activity-icon rounded-circle d-flex align-items-center justify-content-center",a.type])},[t("i",{class:b(a.icon)},null,2)],2)]),t("div",rt,[t("h6",nt,d(a.title),1),t("p",lt,d(a.description),1),t("small",ot,d(a.time),1)])]))),128))])])])]))}};function it(){const r=h([]),n=h([]),l=h([]),a=h(!1),s=h(null),u=async()=>{a.value=!0,s.value=null;try{const[e,w,A]=await Promise.all([v.getStats(),v.getRecentOrders(),v.getRecentActivities()]);r.value=e,n.value=w,l.value=A}catch(e){s.value=p.formatError(e),console.error("Error loading dashboard data:",e)}finally{a.value=!1}},i=async()=>{try{const e=await v.getStats();r.value=e}catch(e){s.value=p.formatError(e)}},k=async()=>{try{const e=await v.getRecentOrders();n.value=e}catch(e){s.value=p.formatError(e)}},_=async()=>{try{const e=await v.getRecentActivities();l.value=e}catch(e){s.value=p.formatError(e)}};return $(()=>{u()}),{stats:r,recentOrders:n,recentActivities:l,loading:a,error:s,loadDashboardData:u,refreshStats:i,refreshOrders:k,refreshActivities:_}}const dt={class:"dashboard-content container-fluid py-4 px-5"},ut={key:0,class:"text-center py-5"},_t={key:1,class:"alert alert-danger",role:"alert"},mt={key:2},ht={class:"row mb-4"},vt={class:"row mb-4"},bt={class:"row"},yt={__name:"Dashboard",setup(r){const{stats:n,recentOrders:l,recentActivities:a,loading:s,error:u,loadDashboardData:i}=it();return(k,_)=>(o(),c("div",dt,[m(s)?(o(),c("div",ut,_[1]||(_[1]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"กำลังโหลด...")],-1),t("p",{class:"mt-3 text-muted"},"กำลังโหลดข้อมูล...",-1)]))):m(u)?(o(),c("div",_t,[_[3]||(_[3]=t("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),y(" "+d(m(u))+" ",1),t("button",{class:"btn btn-outline-danger btn-sm ms-2",onClick:_[0]||(_[0]=(...e)=>m(i)&&m(i)(...e))},_[2]||(_[2]=[t("i",{class:"fas fa-redo me-1"},null,-1),y("ลองใหม่ ")]))])):(o(),c("div",mt,[t("div",ht,[(o(!0),c(x,null,C(m(n),e=>(o(),R(N,{key:e.title,stat:e},null,8,["stat"]))),128))]),t("div",vt,[f(P),f(q)]),t("div",bt,[f(X,{orders:m(l)},null,8,["orders"]),f(ct,{activities:m(a)},null,8,["activities"])])]))]))}};export{yt as default};
